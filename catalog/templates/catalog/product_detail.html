{% extends 'catalog/base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-6">
            <img src="{{ object.image.url }}" class="img-fluid" alt="{{ object.name }}">
        </div>
        <div class="col-md-6">
            <h1>{{ object.name }}</h1>
            <p class="text-muted">Категория: {{ object.category.name }}</p>
            <p>{{ object.description }}</p>
            <h2>{{ object.price }} руб.</h2>
            <p><small>Дата создания: {{ object.created_at|date:"d M Y, H:i" }}</small></p>
            <p><small>Дата последнего изменения: {{ object.updated_at|date:"d M Y, H:i" }}</small></p>

            <div class="mt-3">
                {% if user == object.owner %}
                    <a href="{% url 'catalog:update_product' pk=object.pk %}" class="btn btn-warning">Редактировать</a>
                {% endif %}

                {% if user == object.owner or perms.catalog.delete_product %}
                    <a href="{% url 'catalog:delete_product' pk=object.pk %}" class="btn btn-danger">Удалить</a>
                {% endif %}
                
                {% if perms.catalog.can_unpublish_product and object.is_published %}
                    <a href="{% url 'catalog:unpublish_product' pk=object.pk %}" class="btn btn-secondary">Снять с публикации</a>
                {% endif %}
                
                <a href="{% url 'catalog:home' %}" class="btn btn-primary">Назад к списку</a>
            </div>
        </div>
    </div>
{% endblock %}
